title: 浏览器渲染
date: 2022-2-6 23:30:09
categories:
- html-css
---
1. 首先解析html 生产dom 树
2. 再解析css 生产 cssom 树
3. 2者结合生产 render 树
4. 遍历渲染树 拿到每一个节点的渲染信息
5. 将每个节点绘制到屏幕上，
   
# 回流
节点发生改变就会回流 ，
会产生回流的方法
1. 页面首次渲染
2. 浏览器窗口大小发生改变
3. 元素尺寸或位置发生改变
4. 元素内容变化（文字数量或图片大小等等）
5. 元素字体大小变化
6. 添加或者删除可见的DOM元素
7. 激活CSS伪类（例如：:hover）
8. 查询某些属性或调用某些方法

# 重绘（Repaint）
当我们操作的节点上的元素并不导致元素位置发生变化时，比如color,background-color,visibility(注意虽然节点隐藏了，但是元素还在，并且位置也不会发生变化)

浏览器会将新的样式赋值给这些节点，我们称这个过程为重绘

# 再实际开发中要避免回流和重绘，可以提高性能

避免使用 table 布局。
尽可能在 DOM 树的最末端改变class。
避免设置多层内联样式。
将动画效果应用到position属性为absolute或fixed的元素上。
避免使用CSS表达式（例如：calc()）。
避免频繁操作样式，最好一次性重写style属性，或者将样式列表定义为class并一次性更改class属性。
-避免频繁操作DOM，创建一个documentFragment，在它上面应用所有DOM操作，最后再把它添加到文档中。

也可以先为元素设置display: none，操作结束后再把它显示出来。因为在display属性为none的元素上进行的DOM操作不会引发回流和重绘。
避免频繁读取会引发回流/重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。
对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流